# Javascript 作用域

## 作用域是什么

作用域：维护所有声明标识符的（变量）的查询，并且限制当前代码对这些标识符的访问权限的对象。

1. 维护变量的声明及查询。作用域查询分为 LHS、RHS（简单理解为赋值操作（=）的左边还是右边）
   - LHS：寻找赋值的目标
   - RHS：寻找赋值的源头，即寻找值
2. 维护代码对变量的访问权限

**注意点**：LHS 和 RHS 非严格按照等号划分，而是按照作用（是寻找赋值的目标还是寻找值）来划分，如下代码所示

```javascript
// LHS a
function fn(a) {
  // RHS console
  // RHS a
  console.log(a);
}
fn(1);
```

此处调用 `fn(1)` 时不存在等号，但是还是存在 LHS：_将 a 赋值为 1_

## Javascript 作用域（词法作用域）

尽管将 Javascript 归为解释性语言，但事实上它是一门编译性语言。一般编译性语言分为如下几个阶段：_词法解析 => 语法解析 => 代码生成_。Javascript 与常规编译性语言不同的是，它的编译时间并不长，通常为执行前的几微妙甚至更少，然后通过其他手段（例如 JIT）来提高性能 <sub>[1]</sub>

作用域主要包含两种工作模型：_词法作用域、动态作用域_

- 词法作用域（静态作用域）：在词法解析阶段定义的作用域。即是由代码的书写顺序来决定作用域。
- 动态作用域：运行时根据程序的流程信息来动态确定作用域。_有没有觉得很像 this_

### 欺骗词法

Javascript 具有欺骗词法的手段，with 和 eval

#### eval

```javascript
eval('var a = 2');
```

## Javascript 作用域分类

## 动态作用域

## 作用域嵌套

## 作用域提升

## 闭包

[1] 你不知道的 Javascript 上卷 1.1 编译原理
