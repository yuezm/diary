# HTTP 从 1.0 到 1.1 到 2.0

## 什么是 HTTP

HTTP（Hyper Text Transfer Protocol）：超文本传输协议，用于传输超媒体文档的应用层协议。

### HTTP 作用

传输超媒体，HTTP 是万维网的数据通信的基础，设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。3 项构建 WWW 技术 HTML、HTTP、URI

超媒体：对超文本的术语延伸，包含图片、音频、视频、文本、超链接的非线性消息媒体

> 超文本（英语：Hypertext）是一种可以显示在电脑显示器或电子设备上的文本，现时超文本普遍以电子文档的方式存在，其中的文字包含有可以链接到其他字段或者文档的超链接，允许从当前阅读位置直接切换到超链接所指向的文字

1. 客户端-服务端模型：由客户端发起请求（Request），服务端返回响应（Response）的方式进行数据交互

请求方法 请求 URL HTTP 协议版本
请求头

实体

协议版本 HTTP 状态码 HTTP 状态信息
响应头

实体

### HTTP 1.0

1. 无状态协议：HTTP 自身不对通信状态进行保存
2. 无连接：HTTP 通信一次就需要 连接/断开 TCP，即 HTTP 开始通信时连接 TCP，结束通信时断开 TCP
3. 队首阻塞（Header Of Line Blocking）：每一个 HTTP 请求，都必须等待上一个 HTTP 响应才可以发送

HTTP 创建之初，只要用于传输文字，其中部分文字可能带有超链接，内容远远没有现在丰富， 排版也远远没有现在精美，交互也远远没有现在复杂，对于当时这种简单的应用场景，HTTP 表现得还可以。

但是随着互联网的高速发展，WEB2.0 的兴起，更多丰富的内容，更精美的排版，更加复杂的交互等等。导致随随便便一个网站的大小都会比原来的网站大很多，更不用说社交、电商网站，请求数量大，请求内容大，那么会引发一个问题 **加载速度**

我们讨论加载速度，首先排除带宽影响，因为我们主要讨论协议，讨论带宽没啥意义

#### 无连接

由于 HTTP 无法复用连接，则每次 HTTP 发送请求时，都会发起 TCP 连接，HTTP 结束通信时断开 TCP 连接

1. 由于 TCP 三次握手会多出 1RTT 时间，额外增加延迟
2. 由于 TCP 的拥塞机制中的慢启动，新的连接总是要过一段时间才能高效传输

RTT: Round Trip Time，往返时间，从发送端发送数据开始，到接收到来自服务端的确认的时间间隔。可以使用 ping、tcpping 来测试

HTTP1.1 引入 头部，

```text
 Connection: Keep-Alive # 默认开启哈
 Keep-Alive: timeout=10 # 可以设置时间，也可以由服务器设置
```

ngnix 服务器配置

```

```

```text
Connection: close
```

注意的是，Connection 为 Hop-by-Hop 头部，只对单词转发有效，遇到缓存和代理则不再转发

## HTTP2.0

### SPDY

### HTTP2.0 优点

### HTTP2.0 依旧未解决的问题

## HTTP3.0

## HTTP 一些常见的误区

1. HTTP 协议必须基于 TCP/IP 协议簇
2. POST 请求前会发送一次请求
3. GET 请求不能携带 Body Entity
4. GET 请求对 URL 长度有限制
